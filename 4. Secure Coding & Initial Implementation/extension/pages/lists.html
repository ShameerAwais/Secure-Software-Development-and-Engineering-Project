<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allow/Block Lists - Web Safety Scanner</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/popup.css">
  <style>
    /* Additional styles specific to lists page */
    :root {
      --primary-color: #4285f4;
      --primary-dark: #3367d6;
      --success-color: #0f9d58;
      --success-bg: #e8f5e9;
      --error-color: #db4437;
      --error-bg: #ffebee;
      --warning-color: #f4b400;
      --warning-bg: #fff8e1;
      --neutral-color: #5f6368;
      --surface-color: #ffffff;
      --background-light: #f8f9fa;
      --border-color: #dadce0;
      --text-primary: #202124;
      --text-secondary: #5f6368;
      --text-on-primary: #ffffff;
      --box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
      --border-radius: 8px;
    }
    
    body {
      font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: var(--text-primary);
      background-color: var(--background-light);
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      background-color: var(--primary-color);
      color: var(--text-on-primary);
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: var(--box-shadow);
    }
    
    header h1 {
      margin: 0;
      font-size: 24px;
      display: flex;
      align-items: center;
    }
    
    header i {
      margin-right: 12px;
    }
    
    .card {
      background-color: var(--surface-color);
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 24px;
      margin-bottom: 24px;
    }
    
    .card h2 {
      margin-top: 0;
      color: var(--primary-color);
      font-size: 18px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
    }
    
    .card h2 i {
      margin-right: 8px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 24px;
    }
    
    .tab-button {
      padding: 12px 24px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      color: var(--text-secondary);
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .tab-button:hover {
      color: var(--primary-color);
      background-color: transparent;
    }
    
    .tab-button.active {
      color: var(--primary-color);
      border-bottom-color: var(--primary-color);
      background-color: transparent;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 16px;
    }
    
    th, td {
      text-align: left;
      padding: 12px 8px;
      border-bottom: 1px solid var(--border-color);
    }
    
    th {
      font-weight: 500;
      color: var(--text-secondary);
    }
    
    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--primary-color);
      padding: 4px 8px;
      border-radius: 4px;
      transition: all 0.2s;
    }
    
    .action-btn:hover {
      background-color: rgba(66, 133, 244, 0.1);
    }
    
    .action-btn.delete {
      color: var(--error-color);
    }
    
    .action-btn.delete:hover {
      background-color: rgba(219, 68, 55, 0.1);
    }
    
    .form-group {
      margin-bottom: 16px;
    }
    
    .form-group label {
      display: block;
      font-size: 14px;
      margin-bottom: 8px;
      color: var(--text-secondary);
    }
    
    .form-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 14px;
      box-sizing: border-box;
    }
    
    button {
      background-color: var(--primary-color);
      color: var(--text-on-primary);
      border: none;
      padding: 10px 16px;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
    }
    
    button i {
      margin-right: 8px;
    }
    
    button:hover {
      background-color: var(--primary-dark);
    }
    
    button.secondary {
      background-color: var(--surface-color);
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
    }
    
    button.secondary:hover {
      background-color: rgba(66, 133, 244, 0.1);
    }
    
    .error-message {
      color: var(--error-color);
      background-color: var(--error-bg);
      padding: 12px;
      border-radius: var(--border-radius);
      margin-bottom: 16px;
      display: none;
    }
    
    .success-message {
      color: var(--success-color);
      background-color: var(--success-bg);
      padding: 12px;
      border-radius: var(--border-radius);
      margin-bottom: 16px;
      display: none;
    }
    
    .no-items {
      text-align: center;
      padding: 32px 16px;
      color: var(--text-secondary);
    }
    
    .no-items i {
      font-size: 32px;
      margin-bottom: 16px;
      opacity: 0.5;
    }
    
    .breadcrumb-nav {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
      padding: 8px 16px;
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: 0 1px 2px rgba(0,0,0,0.08);
    }
    
    .breadcrumb-item {
      display: flex;
      align-items: center;
    }
    
    .breadcrumb-item:not(:last-child)::after {
      content: "â€º";
      margin: 0 8px;
      color: var(--text-secondary);
    }
    
    .breadcrumb-item a {
      color: var(--primary-color);
      text-decoration: none;
    }
    
    .breadcrumb-item.active {
      color: var(--text-secondary);
    }
    
    .nav-links {
      display: flex;
      gap: 16px;
      margin-bottom: 24px;
    }
    
    .nav-link {
      color: var(--primary-color);
      text-decoration: none;
      padding: 8px;
      border-radius: var(--border-radius);
      transition: background-color 0.2s;
      display: flex;
      align-items: center;
    }
    
    .nav-link i {
      margin-right: 8px;
    }
    
    .nav-link:hover {
      background-color: var(--background-light);
      text-decoration: underline;
    }
    
    .hidden {
      display: none !important;
    }
    
    .intro-text {
      margin-bottom: 16px;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <h1><i class="fas fa-list"></i> Allow/Block Lists</h1>
    </div>
  </header>
  
  <main class="container">
    <div class="breadcrumb-nav">
      <div class="breadcrumb-item">
        <a href="popup.html"><i class="fas fa-home"></i> Home</a>
      </div>
      <div class="breadcrumb-item active">
        Allow/Block Lists
      </div>
    </div>
    
    <div class="nav-links">
      <a href="profile.html" class="nav-link"><i class="fas fa-user-shield"></i> User Profile</a>
      <a href="options.html" class="nav-link"><i class="fas fa-cog"></i> Extension Settings</a>
      <a href="history.html" class="nav-link"><i class="fas fa-history"></i> URL History</a>
    </div>
    
    <div id="not-authenticated" class="card hidden">
      <h2><i class="fas fa-exclamation-circle"></i> Not Authenticated</h2>
      <p>You need to log in to manage your allow and block lists. Please open the extension popup and log in.</p>
    </div>
    
    <div id="error-message" class="error-message"></div>
    <div id="success-message" class="success-message"></div>
    
    <div id="lists-content">
      <div class="intro-text">
        <p><i class="fas fa-info-circle"></i> Allow and block lists help you manage websites you always want to trust or always want to block. URLs in your allow list will be trusted automatically, while URLs in your block list will always be flagged as unsafe.</p>
      </div>
      
      <div class="tabs">
        <button class="tab-button active" data-tab="allow-list"><i class="fas fa-check-circle"></i> Allow List</button>
        <button class="tab-button" data-tab="block-list"><i class="fas fa-ban"></i> Block List</button>
      </div>
      
      <div id="allow-list" class="tab-content active">
        <div class="card">
          <h2><i class="fas fa-check-circle"></i> Trusted Sites</h2>
          
          <div class="form-group">
            <form id="add-allow-form">
              <label for="allow-url">Add new trusted site (domain only, e.g. example.com):</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="allow-url" placeholder="Enter domain" required>
                <button type="submit"><i class="fas fa-plus"></i> Add</button>
              </div>
            </form>
          </div>
          
          <div id="allow-list-table-container">
            <table id="allow-list-table">
              <thead>
                <tr>
                  <th>Domain</th>
                  <th>Added On</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated dynamically -->
                <tr class="loading-placeholder">
                  <td colspan="3" style="text-align: center;">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div id="allow-list-empty" class="no-items hidden">
            <i class="fas fa-list"></i>
            <p>Your allow list is empty. Add trusted domains above.</p>
          </div>
        </div>
      </div>
      
      <div id="block-list" class="tab-content">
        <div class="card">
          <h2><i class="fas fa-ban"></i> Blocked Sites</h2>
          
          <div class="form-group">
            <form id="add-block-form">
              <label for="block-url">Add new blocked site (domain only, e.g. example.com):</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="block-url" placeholder="Enter domain" required>
                <button type="submit"><i class="fas fa-plus"></i> Add</button>
              </div>
            </form>
          </div>
          
          <div id="block-list-table-container">
            <table id="block-list-table">
              <thead>
                <tr>
                  <th>Domain</th>
                  <th>Added On</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated dynamically -->
                <tr class="loading-placeholder">
                  <td colspan="3" style="text-align: center;">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div id="block-list-empty" class="no-items hidden">
            <i class="fas fa-list"></i>
            <p>Your block list is empty. Add blocked domains above.</p>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <script type="module" src="../js/lists.js"></script>
</body>
</html>