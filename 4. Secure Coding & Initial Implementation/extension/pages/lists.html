<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Allow/Block Lists - Web Safety Scanner</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Load base CSS variables first -->
  <link rel="stylesheet" href="../css/popup.css">
  <!-- Load specific page CSS that overrides popup.css values -->
  <link rel="stylesheet" href="../css/options.css">
  <link rel="stylesheet" href="../css/lists.css">
</head>
<body class="lists-page">
  <header>
    <div class="container">
      <h1><i class="fas fa-list"></i> Allow/Block Lists</h1>
    </div>
  </header>
  
  <main class="container">
    <div class="breadcrumb-nav">
      <div class="breadcrumb-item">
        <a href="popup.html"><i class="fas fa-home"></i> Home</a>
      </div>
      <div class="breadcrumb-item active">
        Allow/Block Lists
      </div>
    </div>
    
    <div class="nav-links">
      <a href="profile.html" class="nav-link"><i class="fas fa-user-shield"></i> User Profile</a>
      <a href="options.html" class="nav-link"><i class="fas fa-cog"></i> Extension Settings</a>
      <a href="history.html" class="nav-link"><i class="fas fa-history"></i> URL History</a>
    </div>
    
    <div id="not-authenticated" class="card hidden">
      <h2><i class="fas fa-exclamation-circle"></i> Not Authenticated</h2>
      <p>You need to log in to manage your allow and block lists. Please open the extension popup and log in.</p>
    </div>
    
    <div id="error-message" class="error-message"></div>
    <div id="success-message" class="success-message"></div>
    
    <div id="lists-content">
      <div class="intro-text">
        <p><i class="fas fa-info-circle"></i> Allow and block lists help you manage websites you always want to trust or always want to block. URLs in your allow list will be trusted automatically, while URLs in your block list will always be flagged as unsafe.</p>
      </div>
      
      <div class="tabs">
        <button class="tab-button active" data-tab="allow-list"><i class="fas fa-check-circle"></i> Allow List</button>
        <button class="tab-button" data-tab="block-list"><i class="fas fa-ban"></i> Block List</button>
      </div>
      
      <div id="allow-list" class="tab-content active">
        <div class="card">
          <h2><i class="fas fa-check-circle"></i> Trusted Sites</h2>
          
          <div class="form-group">
            <form id="add-allow-form">
              <label for="allow-url">Add new trusted site (domain only, e.g. example.com):</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="allow-url" placeholder="Enter domain" required>
                <button type="submit"><i class="fas fa-plus"></i> Add</button>
              </div>
            </form>
          </div>
          
          <div id="allow-list-table-container">
            <table id="allow-list-table">
              <thead>
                <tr>
                  <th>Domain</th>
                  <th>Added On</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated dynamically -->
                <tr class="loading-placeholder">
                  <td colspan="3" style="text-align: center;">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div id="allow-list-empty" class="no-items hidden">
            <i class="fas fa-list"></i>
            <p>Your allow list is empty. Add trusted domains above.</p>
          </div>
        </div>
      </div>
      
      <div id="block-list" class="tab-content">
        <div class="card">
          <h2><i class="fas fa-ban"></i> Blocked Sites</h2>
          
          <div class="form-group">
            <form id="add-block-form">
              <label for="block-url">Add new blocked site (domain only, e.g. example.com):</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="block-url" placeholder="Enter domain" required>
                <button type="submit"><i class="fas fa-plus"></i> Add</button>
              </div>
            </form>
          </div>
          
          <div id="block-list-table-container">
            <table id="block-list-table">
              <thead>
                <tr>
                  <th>Domain</th>
                  <th>Added On</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <!-- Will be populated dynamically -->
                <tr class="loading-placeholder">
                  <td colspan="3" style="text-align: center;">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div id="block-list-empty" class="no-items hidden">
            <i class="fas fa-list"></i>
            <p>Your block list is empty. Add blocked domains above.</p>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <script type="module" src="../js/lists.js"></script>
</body>
</html>